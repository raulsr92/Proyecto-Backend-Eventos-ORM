
//Importar pool de conexiones
import pool from '../config/db.js'

//Importar el modelo de eventos (sequelize)
import * as modelEvento from '../models/evento.model.js'
import * as archivos from '../utils/archivos.js'

// Crear funciones

// ⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩  Método getAll

export const getAll = async function () {
 
    console.log("----------------------Service--------------------")

    //Llamado al método getAll del modelo de eventos
    
    const results = await modelEvento.getAll();

    console.log(`Resultados en servicio:`)
    console.log(results);
    return results;
}

// ⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩  Método getById

export const getById = async function (Id_Evento) {
 
    console.log("----------------------Service para Listar por ID--------------------")
    
    const results = await modelEvento.getById(Id_Evento);
    
    console.log(`Resultados en servicio:`)

    console.log(results);
    return results[0];
}

// ⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩  Método create

export const create = async function (objEvento) {
 
    console.log("----------------------Service Insertar nuevo Evento--------------------")
    
    let idEventoCreado = await modelEvento.create(objEvento);
    
    console.log(`Resultados en servicio:`)

    console.log(`idEvento: ${idEventoCreado}`);
    return idEventoCreado;
}

// ⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩  Método update

export const update = async function (Id_Evento, objEvento) {
 
    console.log("----------------------Service Modificar Evento--------------------")
    
    const filasAfectadas = await modelEvento.update(Id_Evento,objEvento)
    
    console.log(`Resultados en servicio:`)
    console.log(`Filas afectadas: ${filasAfectadas}`);
    return filasAfectadas;      
}

// ⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩  Método delete

export const deleteRow = async function (activo,Id_Evento) {
 
    console.log("----------------------Service Delete (modificar activo false) Evento--------------------")
    
    const filasAfectadas = await modelEvento.deleteRow(activo,Id_Evento)
        
    console.log(`Resultados en servicio:`)
    console.log(`Filas afectadas: ${filasAfectadas}`);
    return filasAfectadas;  
}

// ⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩⟨~⟩  Método download archivo

export const downloadArchivo = async function (Id_Evento) {
 
    console.log("----------------------Service para Descargar--------------------")
    
    const results = await modelEvento.getById(Id_Evento);
    
    console.log("luego del model Evento: "+results[0].archivo);
    return archivos.getArchivo(results[0].archivo)
}
